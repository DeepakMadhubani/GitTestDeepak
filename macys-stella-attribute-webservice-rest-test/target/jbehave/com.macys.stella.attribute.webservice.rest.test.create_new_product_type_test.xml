<story path="com/macys/stella/attribute/webservice/rest/test/create_new_product_type_test.story" title="Description: Visble flag in Stella Product Type table should be defaulted to Y. 

Version one Story B-44427 
link - API changes: New Product Type create API to check Visible status flag.

@feature  API changes: New Product Type create API to check Visible status flag.">
<scenario keyword="Scenario:" title="(1) Verify the Create Product type Create API for given Product type name with Department lists">
<examples keyword="Examples:">
<step>Given the product type create API resource available at: product-type-service/v1/brands/</step>
<step>When I create a product type for tenant &lt;tenant&gt; with a product type name as &lt;productTypeName&gt; is Active flag as &lt;isActiveFlag&gt; with department list as &lt;departmentLists&gt;</step>
<step>Then I expect the create request to return with responseCode as &lt;responseCode&gt;</step>
<step>And I expect a valid Product type id</step>
<step>When I connect to STELLA DB with tenant &lt;tenant&gt; for validating status of Visible flag in STELLA DB</step>
<step>Then I should see the Visible flag status as &lt;visibleFlagStatus&gt;</step>
<parameters>
<names><name>S.No</name><name>tenant</name><name>productTypeName</name><name>departmentLists</name><name>isActiveFlag</name><name>responseCode</name><name>visibleFlagStatus</name></names>
<values><value>1</value><value>BCOM</value><value>006pTBCOM4-yc03dk1</value><value>1,2,10</value><value>true</value><value>201</value><value>Y</value></values>
<values><value>2</value><value>MCOM</value><value>006pTMCOM4-yc03dk1</value><value>1,2,10</value><value>true</value><value>201</value><value>Y</value></values>
</parameters>

<example keyword="Example:">{S.No=1, tenant=BCOM, productTypeName=006pTBCOM4-yc03dk1, departmentLists=1,2,10, isActiveFlag=true, responseCode=201, visibleFlagStatus=Y}</example>
<step outcome="successful">Given the product type create API resource available at: <parameter>product-type-service/v1/brands/</parameter></step>
<step outcome="successful">When I create a product type for tenant <parameter>BCOM</parameter> with a product type name as <parameter>006pTBCOM4-yc03dk1</parameter> is Active flag as <parameter>true</parameter> with department list as <parameter>1,2,10</parameter></step>
<step outcome="successful">Then I expect the create request to return with responseCode as <parameter>201</parameter></step>
<step outcome="successful">And I expect a valid Product type id</step>
<step outcome="successful">When I connect to STELLA DB with tenant <parameter>BCOM</parameter> for validating status of Visible flag in STELLA DB</step>
<step outcome="failed" keyword="FAILED">Then I should see the Visible flag status as <parameter>Y</parameter><failure>java.lang.AssertionError: Visible flag status does not matched in STELLA DB
Expected: is &quot;Y&quot;
     got: null
</failure></step>

<example keyword="Example:">{S.No=2, tenant=MCOM, productTypeName=006pTMCOM4-yc03dk1, departmentLists=1,2,10, isActiveFlag=true, responseCode=201, visibleFlagStatus=Y}</example>
<step outcome="successful">Given the product type create API resource available at: <parameter>product-type-service/v1/brands/</parameter></step>
<step outcome="successful">When I create a product type for tenant <parameter>MCOM</parameter> with a product type name as <parameter>006pTMCOM4-yc03dk1</parameter> is Active flag as <parameter>true</parameter> with department list as <parameter>1,2,10</parameter></step>
<step outcome="successful">Then I expect the create request to return with responseCode as <parameter>201</parameter></step>
<step outcome="successful">And I expect a valid Product type id</step>
<step outcome="successful">When I connect to STELLA DB with tenant <parameter>MCOM</parameter> for validating status of Visible flag in STELLA DB</step>
<step outcome="successful">Then I should see the Visible flag status as <parameter>Y</parameter></step>
</examples>
<failure>java.lang.AssertionError: Visible flag status does not matched in STELLA DB
Expected: is &quot;Y&quot;
     got: null

	at org.junit.Assert.assertThat(Assert.java:778)
	at com.macys.stella.attribute.webservice.rest.test.CreateNewProductTypeTest.validateVisibleFlag(CreateNewProductTypeTest.java:88)
	(reflection-invoke)
	at org.jbehave.core.steps.StepCreator$ParameterisedStep.perform(StepCreator.java:550)
	at org.jbehave.core.embedder.StoryRunner$FineSoFar.run(StoryRunner.java:499)
...</failure>
</scenario>
</story>
